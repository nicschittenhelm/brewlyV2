<section
  class="h-[75vh] shadow-xl pt-20 pb-10 px-[10%] justify-between flex relative pb-20"
>
  <div class="flex flex-col justify-center">
    <h1 class="text-8xl font-extrabold mb-10">Neu im Sortiment</h1>
    <p class="w-2/3">
      Unsere SELECT Edition vereint die besten Kaffeesorten aus den
      renommiertesten Anbaugebieten der Welt. Mit höchster Sorgfalt ausgewählt
      und geröstet, bieten diese Kaffees eine außergewöhnliche Vielfalt an
      Aromen und Geschmacksrichtungen. Perfekt für Kaffeeliebhaber, die höchsten
      Genuss und unvergleichliche Qualität suchen.
    </p>
  </div>
  <img
    class="float-end h-full mr-[10%] transform rotate-6"
    src="assets/shop-hero.png"
    alt="shop hero image"
  />

  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class="size-10 animate-bounce absolute bottom-3 left-1/2 transform -translate-x-1/2"
  >
    <circle cx="12" cy="12" r="10"></circle>
    <polyline points="8 12 12 16 16 12"></polyline>
    <line x1="12" y1="8" x2="12" y2="16"></line>
  </svg>
</section>

<section class="h-full min-h-screen bg-white pb-20">
  <div class="flex justify-between px-[10%] py-16 shadow-xl mb-16 w-full">
    <div class="flex flex-wrap gap-4">
      <!-- RoastLevel Filter -->
      <div class="relative inline-block text-left">
        <!-- Button to toggle dropdown -->
        <button
          type="button"
          class="w-[200px] bg-white border-[1px] border-gray-200 shadow-lg text-customDark rounded-lg px-4 py-2 flex items-center justify-between space-x-2 focus:outline-none overflow-hidden"
          (click)="toggleRoastLevelDropdown()"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="truncate first-letter:uppercase">{{
            selectedRoastLevel || "Alle Röstgrade"
          }}</span>

          <!-- Dropdown arrow -->
          <svg
            class="w-5 h-5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 9l-7 7-7-7"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>

        <!-- Dropdown menu -->
        <div
          class="absolute right-0 mt-4 w-[200px] bg-white rounded-lg shadow-lg hidden z-10"
          [ngClass]="{ hidden: !isRoastLevelDropdownOpen }"
        >
          <!-- Reset option -->
          <button
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md border-b-2 border-grey-200 mb-2 first-letter:uppercase"
            (click)="selectRoastLevel('')"
          >
            Alle Röstungsgrade
          </button>

          <!-- Other options -->
          <button
            *ngFor="let roast of roastLevels"
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md first-letter:uppercase"
            (click)="selectRoastLevel(roast)"
          >
            {{ roast }}
          </button>
        </div>
      </div>

      <!-- Specialty Filter -->
      <div class="relative inline-block text-left">
        <!-- Button to toggle dropdown -->
        <button
          type="button"
          class="w-[200px] bg-white border-[1px] border-gray-200 shadow-lg text-customDark rounded-lg px-4 py-2 flex items-center justify-between space-x-2 focus:outline-none overflow-hidden"
          (click)="toggleDropdownSpecialty()"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="truncate first-letter:uppercase">{{
            selectedSpecialty || "Alle Sorten"
          }}</span>

          <!-- Dropdown arrow -->
          <svg
            class="w-5 h-5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 9l-7 7-7-7"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>

        <!-- Dropdown menu -->
        <div
          class="absolute right-0 mt-4 w-[200px] bg-white rounded-lg shadow-lg hidden z-10"
          [ngClass]="{ hidden: !isDropdownOpenSpecialty }"
        >
          <!-- Reset option -->
          <button
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md border-b-2 border-grey-200 mb-2 first-letter:uppercase"
            (click)="selectSpecialty('')"
          >
            Alle Sorten
          </button>

          <!-- Other options -->
          <button
            *ngFor="let option of specialties"
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md first-letter:uppercase"
            (click)="selectSpecialty(option)"
          >
            {{ option }}
          </button>
        </div>
      </div>

      <!-- Weight Filter -->
      <div class="relative inline-block text-left">
        <!-- Button to toggle dropdown -->
        <button
          type="button"
          class="w-[200px] bg-white border-[1px] border-gray-200 shadow-lg text-customDark rounded-lg px-4 py-2 flex items-center justify-between space-x-2 focus:outline-none overflow-hidden"
          (click)="toggleDropdownWeight()"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="truncate first-letter:uppercase">{{
            selectedWeight !== null
              ? selectedWeight + " grams"
              : "Alle Gewichte"
          }}</span>

          <!-- Dropdown arrow -->
          <svg
            class="w-5 h-5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 9l-7 7-7-7"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>

        <!-- Dropdown menu -->
        <div
          class="absolute right-0 mt-4 w-[200px] bg-white rounded-lg shadow-lg hidden z-10"
          [ngClass]="{ hidden: !isDropdownOpenWeight }"
        >
          <!-- Reset option -->
          <button
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md border-b-2 border-grey-200 mb-2 first-letter:uppercase"
            (click)="selectWeight(null)"
          >
            Alle Gewichte
          </button>

          <!-- Other options -->
          <button
            *ngFor="let weight of weights"
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md first-letter:uppercase"
            (click)="selectWeight(weight)"
          >
            {{ weight }}g
          </button>
        </div>
      </div>

      <!-- Reset button -->
      <button type="button" class="text-gray-500" (click)="resetFilters()">
        Zurücksetzen
      </button>
    </div>

    <div class="flex gap-4">
      <!-- Sorting options -->
      <div class="relative inline-block text-left">
        <button
          type="button"
          class="w-[150px] bg-white border-[1px] border-gray-200 shadow-lg text-customDark rounded-lg px-4 py-2 flex items-center justify-between space-x-2 focus:outline-none overflow-hidden"
          (click)="toggleDropdownSort()"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="truncate first-letter:uppercase">{{
            selectedSort || "Sortierung"
          }}</span>

          <!-- Dropdown arrow -->
          <svg
            class="w-5 h-5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 9l-7 7-7-7"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>

        <!-- Dropdown menu for sorting -->
        <div
          class="absolute right-0 mt-4 w-[150px] bg-white rounded-lg shadow-lg hidden z-10"
          [ngClass]="{ hidden: !isDropdownOpenSort }"
        >
          <!-- Default option -->
          <button
            class="block px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md border-b-2 border-grey-200 mb-2 first-letter:uppercase"
            (click)="selectSort(null)"
          >
            Standard
          </button>

          <!-- Sorting options -->
          <button
            class="px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md first-letter:uppercase flex items-center justify-between"
            (click)="selectSort('Aufsteigend')"
          >
            Preis
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-chevron-up"
            >
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
          </button>
          <button
            class="px-4 py-2 text-md w-full text-left hover:bg-custom-gradient hover:text-white text-customDark focus:outline-none rounded-lg hover:shadow-md first-letter:uppercase flex items-center justify-between"
            (click)="selectSort('Absteigend')"
          >
            Preis
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-chevron-down"
            >
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
        </div>
      </div>

      <!-- Search bar -->
      <input
        type="text"
        class="w-[300px] h-12 bg-white border-[1px] border-gray-200 shadow-lg text-customDark rounded-lg px-4 py-2 focus:outline-none"
        [(ngModel)]="searchText"
        (click)="resetFilters()"
        (input)="filterItems()"
        placeholder="Suche.."
      />
    </div>
  </div>

  <div class="flex flex-wrap justify-center gap-6 mx-[5%]">
    <!-- Display items if there are any -->
    <ng-container *ngIf="filteredItems.length; else noItemsFound">
      <app-item-card
        *ngFor="let item of filteredItems"
        [imagePath]="item.imagePath"
        [title]="item.title"
        [description]="item.description"
        [price]="item.price"
        [weight]="item.weight"
        [roastLevel]="item.roastLevel"
        [specialty]="item.specialty"
      ></app-item-card>
    </ng-container>

    <!-- Template for no items found -->
    <ng-template #noItemsFound>
      <div
        class="flex flex-col items-center justify-center w-full px-20 text-xl text-customDark space-y-4 pt-20"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="128"
          height="128"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-frown"
        >
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M16 16s-1.5-2-4-2-4 2-4 2"></path>
          <line x1="9" y1="9" x2="9.01" y2="9"></line>
          <line x1="15" y1="9" x2="15.01" y2="9"></line>
        </svg>
        <p class="text-center text-xl">
          Leider konnten wir keine Kaffesorten
          <br />
          mit den von Ihnen gewählten Eigenschaften finden.
        </p>
      </div>
    </ng-template>
  </div>
</section>
